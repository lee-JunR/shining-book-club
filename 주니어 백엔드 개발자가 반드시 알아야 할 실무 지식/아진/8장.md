# 8장. 실무에서 꼭 필요한 보안 지식

## 이 장에서 다루는 내용
- 인증(Authentication)과 인가(Authorization)
- 토큰 기반 인증 방식
- 데이터 암호화(단방향/양방향)
- 방화벽과 트래픽 제한
- 감사 로그, 비정상 접근 처리
- 시큐어 코딩 및 개인 보안

---

# 1. 인증과 인가

## ✔ 인증(Authentication)
사용자가 **누구인지 확인**하는 절차.  
ID/비밀번호, OAuth, 인증서 기반 인증 등 다양한 방식이 사용된다.

## ✔ 인가(Authorization)
인증된 사용자가 **어떤 기능/자원에 접근할 수 있는지** 확인하는 과정.  
로그인과는 별개로, 기능별 권한 검사가 필요하다.

---

# 2. 인증과 토큰(Token)

## ✔ 토큰과 사용자 매핑 정보 저장 방법

### 1) 외부 저장소(DB/Redis)에 저장
토큰과 사용자 식별 정보를 서버가 직접 저장하는 방식.

- 저장 데이터 예시
  - 토큰 문자열
  - 사용자 식별자(ID)
  - 생성 시간, 최근 사용 시간
  - 토큰 유효 시간, 클라이언트 정보 등
- 장점
  - 토큰을 서버가 직접 무효화할 수 있음
  - 토큰 탈취 문제 대응 가능
- 단점
  - 저장소 호출 비용 발생
  - 규모가 커지면 Redis·DB 부하 증가

메모리 기반 세션(JSESSIONID)도 이 방식의 일종이며, 서버 확장 시 세션 복제가 필요하다.

---

### 2) 토큰 내에 사용자 정보 저장(JWT 방식)
JWT 내부에 사용자 정보와 만료 시간 등을 포함하여 클라이언트에 전달하는 방식.

- 장점
  - 서버 저장소가 필요 없어 구조 단순
  - 수평 확장에 유리(Stateless)
- 단점
  - 토큰이 길어져 네트워크 트래픽 증가
  - 서버에서 임의로 무효화가 어려움 → 짧은 만료시간 + Refresh Token 필수

---

## ✔ 토큰 송수신 방식
- **쿠키(Cookie)**
- **HTTP 헤더(Authorization: Bearer <token>)**

---

## ✔ 토큰 보안 전략
- 짧은 만료 시간 사용
- 마지막 접근 시간을 기준으로 갱신해 보안 강화
- 외부 저장소 방식이면 서버에서 토큰을 즉시 삭제해 무효화 가능
- JWT 사용 시 서버 무효화가 어려우므로 Refresh Token 구조 사용

### ✔ 토큰 재발급
- **Access Token**: API 호출 인증용, 유효시간 짧음
- **Refresh Token**: Access Token 재발급 용도, 유효시간 김

---

# 3. 인가(Authorization)와 접근 제어 모델

## ✔ RBAC(Role-Based Access Control)
- 역할(Role)에 권한을 부여
- 사용자에게 역할을 할당하여 권한 관리
- 조직 내 권한 계층 구조 관리에 적합

## ✔ ABAC(Attribute-Based Access Control)
- 사용자 속성, 요청 정보, 환경 등의 “속성”으로 권한을 결정
- 더 세밀한 정책 제어 가능

> 실무에서는 로그인 여부 + RBAC + 일부 ABAC 규칙을 조합해 사용하기도 한다.

---

# 4. 데이터 암호화

## ✔ 단방향 암호화(해시)
복호화가 불가능한 암호화 방식으로, 주로 비밀번호 저장에 사용된다.

- 사용 알고리즘: SHA-256, MD5, BCrypt
- **충돌 저항성**이 높을수록 안전
- Salt를 추가해 무차별 대입 공격(Brute-force)을 어렵게 한다.

---

## ✔ 양방향 암호화
암호화 및 복호화가 모두 가능한 방식으로, 민감한 데이터 송수신에 사용된다.

### ● 대칭키 암호화
- 암호화/복호화에 **같은 키** 사용
- AES 등이 대표적

### ● 비대칭키 암호화
- 암호화와 복호화에 **서로 다른 키(공개키/개인키)** 사용
- RSA가 대표
- HTTPS, SSH 등에서 사용



