# 주니어 백엔드 개발자가 반드시 알아야 할 실무 지식 
# 1장 정리

## 문제 발생 순서

### 1단계: 첫 번째 문제 - 커넥션 누수

**상황**: 개발 서버 배포 후 얼마 안가 DB 연결 오류 발생
**원인**: DB 커넥션 사용 후 `conn.close()` 누락

java

```java
*// 문제 코드*
Connection conn = ds.getConnection();
try {
    *// DB 작업*
} catch(Exception e) {
    *// 에러 처리*
}
*// conn.close() 누락! ← 커넥션 풀에 반환 안됨*
```

**결과**: 커넥션 풀의 모든 커넥션 소진 → 새 요청 처리 불가

### 2단계: 두 번째 문제 - 타임아웃 설정 누락

**상황**: 첫 번째 문제 해결 후에도 다음날 다시 DB 연결 오류
**원인**: 커넥션 최대 연결 시간 미설정
**설명**: DBMS 자체 커넥션 유지 시간 < 풀의 커넥션 연결 시간

---

## 해결 방법

### 커넥션 누수 방지

```java
*// 권장: try-with-resources*
try (Connection conn = ds.getConnection()) {
    *// DB 작업*
} *// 자동으로 close() 호출// 대안: finally 블록*
Connection conn = null;
try {
    conn = ds.getConnection();
    *// DB 작업*
} finally {
    if (conn != null) conn.close();
}
```

### 커넥션 풀 설정 개선

properties

```java
*# 적절한 타임아웃 설정 예시*
spring.datasource.hikari.max-lifetime=600000  # DBMS 설정보다 짧게
spring.datasource.hikari.connection-timeout=30000
```

---

## 핵심 교훈

### 기술적 교훈

- **리소스 관리**: 빌린 것은 반드시 반납
- **인프라 이해**: DBMS와 애플리케이션 간 연결 메커니즘
- **모니터링**: 커넥션 풀 상태 지속적 관찰

### 개발자 성장 관점

- **프레임워크 의존도**: 스프링이 모든 것을 해결해주지 않음
- **기초 지식 중요성**: 코딩 기술만으로는 부족
- **실무 경험**: 포트폴리오 개발과 실제 서비스 운영의 차이

---

## 결론

기초 지식 부족으로 인한 실수를 방지하기 위해 주니어 개발자는 학습을 통해 실무 기초 지식을 쌓는 것이 중요하다.