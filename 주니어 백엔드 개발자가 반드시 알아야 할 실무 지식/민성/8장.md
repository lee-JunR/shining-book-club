실무에서 꼭 필요한 보안 지식 - 핵심 요약
1. 인증(Authentication)과 인가(Authorization)
   인증 - "누구인지 확인"

로그인, 2FA, 생체인증 등으로 사용자 신원 확인
인증 성공 시 토큰 발급 → 이후 요청마다 토큰으로 사용자 식별

토큰 저장 방식
방식 1: 외부 저장소에 저장
DB/Redis에 [토큰 - 사용자ID] 매핑 정보 저장
장점: 서버에서 토큰 제어 가능 (삭제/무효화)
단점: 저장소 필요
방식 2: 토큰 자체에 저장 (JWT)
토큰 안에 사용자 정보 포함
장점: 저장소 불필요, 수평 확장 쉬움
단점: 네트워크 트래픽 증가, 서버에서 제어 어려움
토큰 보안

✅ 유효 시간 설정 (탈취 피해 최소화)
✅ 클라이언트 IP 검증 (다른 IP면 차단)
✅ 토큰 무효화 기능 (강제 로그아웃)

인가 - "권한 확인"
⚠️ 중요 원칙
java

❌ 나쁜 예: API 파라미터로 사용자 ID 받기
@GetMapping("/myinfo")
public Info getMyInfo(@RequestParam String userId) { ... }

✅ 좋은 예: 토큰에서 사용자 ID 추출
@GetMapping("/myinfo")
public Info getMyInfo(@RequestHeader("token") String token) {
String userId = getUserIdByToken(token); 

토큰으로 식별
...
}
접근 제어 모델

RBAC (역할 기반): 역할에 권한 부여 → 사용자에게 역할 할당
개별 권한: 사용자마다 직접 권한 부여
ABAC (속성 기반): IP, 시간 등 속성으로 제어


2. 데이터 암호화
   단방향 암호화 (해시)

복호화 불가능 → 비밀번호 저장에 사용
알고리즘: SHA-256, BCrypt 등

java// 암호화만 가능
원본 "password" → 해시 "4beb3b02e461..."
(역변환 불가)

// 비교 방식
입력 비밀번호 해시 == DB 저장 해시 → 일치하면 로그인 성공
```

#### Salt로 보안 강화
```
같은 비밀번호도 Salt 다르면 → 다른 해시값
"password" + salt1 → "edb90131..."
"password" + salt2 → "cb787921..."
```

### 양방향 암호화
- **암호화 + 복호화** 모두 가능
- HTTPS, SSH 등에서 사용

#### 대칭키 (AES)
```
암호화/복호화에 같은 키 사용
키 + IV(초기화 벡터) 필요
```

#### 비대칭키 (RSA)
```
공개키로 암호화 → 개인키로 복호화
공개키 유출되도 안전 (개인키 필요하니까)
```

---

## 3. 실전 보안 체크리스트

### ❌ 절대 하지 말아야 할 것
1. **API 파라미터로 사용자 식별자 받기**
2. **비밀번호 평문 저장**
3. **권한 검증 없이 데이터 반환**
4. **운영 계정 여러 명이 공유**

### ✅ 반드시 해야 할 것
1. **토큰으로 사용자 식별** (파라미터 X)
2. **비밀번호는 Salt + 해시로 저장**
3. **접근 권한 철저히 검증**
4. **민감 데이터는 암호화**
5. **운영자별 개별 계정 발급** (추적 가능하게)


--
