1. HMAC을 이용한 데이터 검증
   개념

HMAC: Hash-based Message Authentication Code
메시지 무결성과 인증을 보장하는 암호화 기술

동작 방식
발신자: 메시지 + 비밀키 → HMAC 함수 → MAC 생성 → 메시지와 함께 전송
수신자: 받은 메시지 + 비밀키 → HMAC 함수 → MAC 생성 → 발신자 MAC과 비교
장단점
✅ 장점

단순하고 효율적
낮은 비용으로 보안 구현
해시 알고리즘에 따라 보안성 향상

⚠️ 단점

비밀 키 관리의 어려움
비밀 키 유출 시 보안 취약
키 교체가 까다로움

예제 코드
javapublic String hmac(String message) {
Mac mac = Mac.getInstance("HmacSHA256");
SecretKeySpec secretKeySpec =
new SecretKeySpec(secretKey.getBytes(), "HmacSHA256");
mac.init(secretKeySpec);
byte[] hash = mac.doFinal(message.getBytes("UTF-8"));
return Base64.getEncoder().encodeToString(hash);
}
```

## 2. 방화벽으로 트래픽 제어

### 기본 원칙
- **인바운드**: 필수 트래픽만 허용, 나머지 차단
- **아웃바운드**: 정해진 목적지로만 트래픽 허용

### 트래픽 제어 예시
```
서비스 API: 모든 IP → 서버A:443 허용
관리자 API: 사내 IP만 → 서버B:443 허용
방화벽 종류

물리적 방화벽 장비
가상 방화벽 (AWS 보안 그룹 등)
WAF (Web Application Firewall): SQL 인젝션, XSS 차단
서버 OS 자체 방화벽

3. 감사 로그 (Audit Log)
   정의
   특정 작업, 절차, 사건의 활동 순서를 입증하는 보안 관련 기록
   기록 대상

로그인/로그아웃 내역
암호 초기화, 설정 변경
민감 정보 조회 이력
데이터 수정 이력

일반 로그와 차이
구분감사 로그일반 로그목적컴플라이언스, 활동 입증버그/오류 해결기록필수 기록레벨별 선택 기록보관규정 기간 의무 보관상황에 따라 삭제 가능
4. 데이터 노출 최소화
   마스킹 처리

회원 목록에서 휴대폰 번호, 주소 일부 마스킹
중요: 서버 응답 자체를 마스킹 (프론트엔드만 X)

권한 제어

소수 인원에게만 목록 조회 권한 부여
나머지는 개별 검색만 가능

이상 접근 감지

짧은 시간 내 빈번한 조회 감지
비정상 사용 시 접근 차단

로그 보안
⚠️ 절대 금지: 로그에 비밀번호 평문 기록

민감 정보는 로그에 남기지 않기

5. 비정상 접근 처리
   감지 패턴

평소와 다른 장소/기기에서 로그인
로그인 여러 차례 실패
동일 URL/API 반복 접근
권한 없는 기능 접근 시도

대응 방법

사용자에게 알림 전송
계정 일시 잠금 (브루트 포스 공격 대응)
의심 활동 시 계정 사용 중지

6. 시큐어 코딩
   SQL 인젝션 방지
   ❌ 취약한 코드
   javaString query = "select id, name from member where id = '" + id + "'";
   ✅ 안전한 코드
   javaPreparedStatement pstmt = conn.prepareStatement(
   "select id, name from member where id = ?"
   );
   pstmt.setString(1, id);
   필수 보안 체크리스트

✅ 입력값 검증: 모든 클라이언트 입력값 검증
✅ 개인정보 암호화: 암호, 주민번호 등 암호화
✅ 에러 메시지: 시스템 정보 미노출
✅ 보안 통신: HTTPS 사용
✅ CORS 설정: 허용된 도메인만 접근
✅ CSRF 대응: 토큰, SameSite 쿠키, 캡차 사용

7. 개인 보안
   개발자 PC 보안
   ⚠️ 위험 행동

출처 불분명한 파일 다운로드
의심스러운 이메일 첨부파일 실행

✅ 필수 수칙

화면 보호기 활성화 (자리 비울 때)
중요 사이트 로그인 시 화면 잠금
민감 정보 문서 적절히 파기/보관

물리적 보안

자리 비울 때 화면 잠금
중요 문서 출력 시 즉시 회수

8. 보안과 비용
   보안 투자 항목

방화벽/웹방화벽 도입
감사 로그용 스토리지
비정상 접근 탐지 기능 개발
접근 제어 솔루션

최소 보안 요구사항
💰 예산이 부족해도 반드시 해야 할 것:

인증/인가 구현
주요 정보 암호화
서버 방화벽 설정
Prepared Statement 사용


핵심 원칙
🔐 보안의 기본

최소 권한 원칙
입력값 신뢰 금지
다층 방어 (Defense in Depth)
감사 추적 가능성

⚠️ 한 번의 실수가 큰 사고로

개발자 PC 해킹 → DB 접근 → 정보 유출
랜섬웨어 감염 → 데이터 암호화 → 복구 비용 발생