# 8장 정리 -

## 8-1장 실무에서 꼭 필요한 보안 지식.

- 인증과 인가
- 데이터 암호화 (단방향, 양방향)

### ** 실무에서 꼭 필요한 보안 지식 정리 **

## 1 인증과 인가

인증과 인가는 서버 개발의 가장 기본적인 보안 요소

```
- 인증 : 인증은 사용자가 누구인지 확인하는 과정

- 인증 흐름 : 사용자가 아이디와 암호를 입력해 로그인에 성공하면 서버는 클라이언트에 토근이라는 문자열을 제공

- 토근 저장 방식
1. 별도 저장소 : 토큰과 사용자 식별 정보의 매핑을 DB나 레디스 같은 외부 저장소에 보관

2. 토큰 자체 저장 : 토큰 자체에 사용자 식별 정보를 저장하는 방식 (예:JWT)를 사용
이 방식은 외부 DB가 필요 없어 서버 구조가 간단하며 수평 확장이 쉽지만 토큰에 데이터가 추가되어 네트워크 트래픽이 증가할 수 있다.

- 토큰 송수신 : 클라이언트는 주로 쿠키나 특정 이름을 가진 헤더를 통해 토큰을 서버에 전송

- 토큰 보안 : 토큰이 탈취되는 보안 문제를 완화하기 위해 토큰 유효 시간을 제한해야 하고 토큰 생성 시 접근한 클라이언트 IP와 실제 토큰을 전송한 클라이언트 IP가 같은지 비교하여 비정상 접근을 거부하면 보안이 향상된다.

인가 : 인가는 사용자가 요청한 기능을 실행한 권한이 있는지 확인하는 역할

기본 원칙 : 접근 제어의 기본은 토큰이나 세션을 통해 로그인한 사용자의 식별자를 구하고 API 요청 파라미터로 사용자 식별자를 받지 않는 것

- 접근 제어 모델
1. 역할 기반 접근 제어 (RBAC) : 역할별로 허용된 기능 집합을 할당하고, 사용자에게는 역할을 부여하여 권한을 체계적으로 관리

2. 속성 기반 접근 제어 (ABAC) : 사용자의 IP 주소 같은 속성을 이용해 접근을 제어하며, 정교한 제어가 가능하지만 구현이 복잡
```

## 2 데이터 암호화

로그인 비밀번호처럼 유출 시 큰 피해를 줄 수 있는 데이터는 반드시 암호화해서 저장해야 한다.
암호화된 비밀번호는 원본 값을 알아내기 어려워 피해 발생 전에 대응할 시간을 벌 수 있다.

```
- 단방향 암호화 : 단방향 암호화는 암호화한 데이터를 복호화할 수 없는 방식

- 단방향 암호화 원리 : 해시 함수를 사용하여 데이터를 해시 값으로 변환

- 단방향 암호화 활용 : 주로 로그인 비밀번호 암호화에 사용됩니다. 로그인 시 입력된 비밀번호를 암호화한 후 DB에 저장된 해시 값과 비교하여 일치 여부를 판단

- 솔트 사용 : 같은 원본 데이터는 항상 동일한 해시 값을 생성하여 레인보우 테이블 공격에 취약할 수 있는데 이를 방지하기 위해 암호화 시 임의의 값인 솔트를 함께 사용하여 결과 해시 값이 매번 달라지도록 보안을 강화

- 양방향 암호화 : 양방향 암호화는 암호화와 복호화가 모두 가능한 방식

- 양방향 암호화 활용 : 보안이 중요한 데이터 송수신 과정에 주로 사용

- 대칭 키 방식
원리: 암호화와 복호화에 동일한 키를 사용합니다 (예: AES)
키가 유출되면 누구나 복호화가 가능하므로 키 보안이 매우 중요
AES는 같은 키를 사용해도 패턴 노출을 막기 위해 초기화 벡터(IV)를 함께 사용

- 비대칭 키 방식
원리: 암호화와 복호화에 서로 다른 키 (공개 키와 개인 키) 쌍을 사용
공개 키는 데이터를 암호화하는 데 사용되며, 개인 키는 암호화된 데이터를 복호화하는 데 사용
개인 키로 암호화하고 공개 키로 복호화하는 방식은 신원 확인이나 서명 같은 인증 목적으로 사용
```

#### 결론

보안은 서비스 운영 과정에서 심각한 타격을 초래할 수 있는 핵심 영역이다.

서버 개발자는 기능 구현 외에도 인증을 통해 사용자 신원을 정확히 확인하고 인가를 통해 권한 없는 접근을 차단하는 기본 원칙을 준수해야 한다.

특히 비밀번호 같은 민감 정보는 복호화가 불가능한 단방향 암호화(솔트 포함)를 통해 안전하게 저장해야 하며 전송 과정에서는 양방향 암호화를 통해 데이터의 안전을 확보해야 한다.

성능 문제에 대한 복잡한 최적화만큼이나 이러한 기본적인 보안 지식을 실무에 적용하는 것이 서비스의 안정성을 유지하는 데 필수적이라고 생각한다.
