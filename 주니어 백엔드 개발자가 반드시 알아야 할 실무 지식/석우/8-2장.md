# 8장 정리 -

## 8-2장 실무에서 꼭 필요한 보안 지식.

- HMAC을 이용한 데이터 검증
- 방화벽으로 필요한 트래픽만 허용하기
- 감사로그(audit log) 남기기
- 데이터 노출 줄이기
- 비정상 접근 처리
- 시큐어 코딩
- 개인 보안

## ** 실무에서 꼭 필요한 보안 지식 정리 **

### HMAC을 이용한 데이터 검증

HMAC(Hash-based Message Authentication Code)은 API 통신 시 데이터가 위변조되지 않았음(메시지 무결성)을 확인하고 발신자를 인증(인증)하는 데 사용된다.

HMAC은 해시 함수와 비밀 키(Secret Key)를 사용하며 메시지 발신자는 비밀 키로 해싱한 MAC(메시지 인증 코드)을 메시지와 함께 전송한다.

수신자는 동일한 비밀 키를 이용해 MAC을 재계산하여 비교함으로써 데이터의 무결성을 보장합니다.

• 장점: 발신자와 수신자가 비밀 키만 공유하면 되므로 단순하고 효율적이며, 낮은 비용으로 인증 보안을 구현할 수 있습니다.
• 단점: 비밀 키 관리 소홀 시 보안에 취약해지며, 유출 위험 때문에 비밀 키 교체 작업이 까다로울 수 있습니다.

### 방화벽으로 필요한 트래픽만 허용하기

방화벽(Firewall)은 서버가 외부에 노출될 때 발생하는 포트 스캔이나 다양한 공격을 방지하기 위해 필요한 트래픽만 허용하고 나머지는 차단하는 기본적인 네트워크 접근 통제 수단이다.

• 인바운드 트래픽 (Inbound Traffic): 외부에서 내부로 유입되는 트래픽으로, 필수 트래픽만 허용하고 나머지 모든 포트는 차단해야 한다.

• 아웃바운드 트래픽 (Outbound Traffic): 내부에서 외부로 유출되는 트래픽 역시 해커의 중간 경유지로 악용되는 것을 막기 위해 정해진 목적지로의 트래픽만 허용해야 한다.

• 웹 방화벽 (WAF): HTTP/HTTPS 수준의 SQL 인젝션이나 XSS 같은 웹 기반 위협을 감지하고 차단한다.

• 만약 별도의 방화벽 솔루션을 사용하지 않는다면, 최소한 서버 OS 수준의 방화벽 기능을 설정하여 시스템을 보호해야 한다.

### 감사 로그(Audit Log) 남기기

감사 로그는 특정 작업, 절차, 사건에 영향을 주는 활동의 순서를 입증하는 보안 관련 기록이다.

• 기록 대상: 사용자의 로그인/로그아웃 내역, 암호 초기화 등 설정 변경 내역, 데이터 조회 및 변경 이력 등을 포함한다.

• 중요성: 감사 로그는 보안 사고 발생 시 문제 해결에 큰 도움이 되는 중거로 사용되며 산업군에 따라 법적으로 요구되는 보안 인증 항목에 포함되어 매우 중요한 역할을 한다.

• 일반 로그와의 차이: 감사 로그는 컴플라이언스를 지키기 위해 활동 내역을 필수로 기록해야 하며, 규정에 정해진 기간 동안 보관해야 한다.

### 데이터 노출 줄이기

개인 정보와 같은 민감 정보의 노출을 최소화하여 고객 정보의 무단 수집을 방지해야 한다.

• 마스킹(Masking): 고객 이름, 휴대폰 번호, 배송 주소 등 민감 정보의 일부를 마스킹하여 노출을 줄여야 합니다. 이때 API 응답 데이터 자체가 서버에서 마스킹되어야 하며, 프런트엔드 코드에서만 마스킹 처리를 해서는 안 된다.

• 권한 부여 최소화: 고객 목록 조회 권한을 소수 인원에게만 부여하는 것이 정보 유출 위험을 줄이는 한 방법이다.

• 로그 보안: 로그 메시지에 사용자의 비밀번호 같은 민감 정보가 평문으로 기록되지 않도록 신경 써야 한다.

### 비정상 접근 처리

사용자에게만 계정 관리를 맡기지 않고, 시스템적으로 보안을 강화하여 비정상적인 접근에 대응해야 한다.

• 비정상 패턴 감지: 평소와 다른 장소나 기기에서 로그인하거나, 로그인에 여러 차례 실패하는 경우를 비정상 접근으로 판단한다.

• 대응 조치: 비정상 접근이 의심되면 사용자에게 알림을 전송하거나, 연속 로그인 실패 시 일시적으로 계정을 잠금 처리하여 브루트 포스(Brute Force) 공격에 대응해야 한다.

• 권한 외 접근 처리: 권한이 없는 URL이나 API에 대한 접근 시도를 하는 경우에도 부정 사용으로 간주하고 계정을 잠가 피해를 줄일 수 있다.

### 시큐어 코딩

코딩 단계에서 발생할 수 있는 취약점을 사전에 방지하는 것이 중요하며, SQL 인젝션(Injection) 공격을 막는 것이 가장 핵심적인 보안 조치이다.

• SQL 인젝션 방지: 해커가 입력한 값이 SQL 쿼리에 삽입되는 것을 막기 위해, 사용자 입력값을 사용하는 쿼리는 반드시 Prepared Statement를 사용해야 합니다. Prepared Statement는 특수 문자를 알맞게 변환하여 공격을 피할 수 있게 한다.

• 기타 보안 강화 요소:
◦ 클라이언트가 전송한 모든 입력값을 검증해야 한다. (필수 여부, 길이 제한, 미허용 값)
◦ 개인 정보 및 민감 정보를 반드시 암호화해야 한다.
◦ 에러 메시지에 내부 IP, DB IP 등 시스템 정보가 노출되지 않도록 해야 한다.
◦ 데이터 유출 방지를 위해 HTTPS와 같은 보안 통신을 사용
◦ 주요 기능은 CSRF 토큰 등을 사용하여 위조 공격에 대응

### 개인 보안

개발자는 다양한 서버와 DB에 접근할 권한을 가지고 있어, 개발자 PC가 해킹당하면 큰 사고로 이어지기 때문에 개인 보안에 매우 민감해야 한다.

• 소프트웨어 보안: 출처 불분명한 파일 다운로드나 의심스러운 이메일 첨부 파일 실행을 피해야 합니다. 실제로 개발자 PC 해킹을 통해 DB 접속 암호 탈취 및 랜섬웨어 감염 사고가 발생한 사례가 있다.

• 물리적 보안: 자리를 비울 때는 화면 보호기를 실행하여 모니터를 잠가야 하며, 중요 사이트에 로그인한 상태에서 자리를 비우지 않도록 주의해야 한다.

#### 결론

8장에서 다룬 보안 지식들은 서비스의 안정성과 신뢰성을 유지하는 데 필수적이다.

단순히 인증과 인가 같은 기본적인 방어를 넘어서 HMAC를 통한 데이터 무결성 검증, 방화벽을 통한 네트워크 접근 제어, 감사 로그를 통한 활동 추적 및 시큐어 코딩 같은 실무 조치가 요구된다.

특히, 보안 수준을 높이는 것은 비용 증가를 동반하지만, 최소한의 보안 조치(인증, 인가, 중요 정보 암호화, 서버 수준의 방화벽)를 유지하는 것이 보안 사고 발생 확률을 낮추는 가장 합리적인 방법이다.

개발자 개인의 보안 의식 역시 시스템의 보안만큼 중요하다고 생각한다.
